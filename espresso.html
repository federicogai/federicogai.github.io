<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Coffee with Fede ‚Äî Media Intelligence</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
  <style>
    body { margin: 0; padding: 0; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState } = React;

    const FEDERICO_SYSTEM_PROMPT = `You are Federico Gai's personal media intelligence assistant. Your role is to help Federico create LinkedIn posts and weekly briefings. Here is everything you need to know about him:

IDENTITY & POSITIONING:
- Italian Managing Partner, 20 years in media/advertising, living in Germany for 10+ years
- His unique angle: he is the bridge between Italian and German media markets. In Germany people call him "the Italian one", in Italy "il tedesco"
- Currently in garden leave, actively building his LinkedIn presence to attract small media/SEO/AI companies wanting to expand between Italy and Germany
- His philosophy: "happiness triangle" ‚Äî keeping clients, team, and finance all happy simultaneously

PERSONALITY & COMMUNICATION STYLE:
- Clear, direct, conversational with a touch of irony
- "Work hard, play hard" energy
- NOT overly enthusiastic, NOT preachy, NOT hollow/inspirational
- He jokes about his Italian accent and cross-cultural situations
- He adapts to both Italian warmth and German directness naturally
- He values: genuine relationships, transparency, no-bullshit communication, loyalty

LINKEDIN POST RULES (CRITICAL):
- English primarily
- Conversational, slightly ironic where natural ‚Äî never forced
- 150-250 words max
- Do NOT start with "I" as the first word
- Do NOT use excessive bullet points or lists in the post itself
- Do NOT sound like ChatGPT wrote it ‚Äî avoid: "In today's fast-paced world", "game-changer", "thrilled to share", "excited to announce"
- If there is a natural Italian/German market angle, use it ‚Äî but never force it
- End with an engaging question OR a provocative take that invites a response
- Max 3 hashtags at the very end, relevant ones only
- Style: confident like Ivan Fernandes on LinkedIn, clear like Ruben Hassid, a touch of Marco Montemagno's irony but toned down 40%

TOPICS TO STAY AWAY FROM:
- Politics, religion
- Excessive diversity/sustainability preaching
- Too personal/family content

SOURCES TO SEARCH (in priority order):
- Italian sources: Engage.it, Ninja Marketing Italy (ninjamarketing.it), Primaonline.it, DailyMed.it
- International: AdAge, AdExchanger, Marketing Dive, The Drum, Campaign, Axios Media, Adweek
- German: Horizont.net, W&V (werben-verkaufen.de)
- Topics: AI in advertising, agency restructuring, programmatic, media investment, Italian market news, German market news`;

    const formatContent = (text) => {
      const lines = text.split("\n");
      return lines.map((line, i) => {
        if (!line) return React.createElement("div", { key: i, style: { height: 10 } });
        if (line.startsWith("# ")) return React.createElement("h1", { key: i, className: "result-h1" }, line.slice(2));
        if (line.startsWith("## ")) return React.createElement("h2", { key: i, className: "result-h2" }, line.slice(3));
        if (line.startsWith("### ")) return React.createElement("h3", { key: i, className: "result-h3" }, line.slice(4));
        if (line.startsWith("**") && line.endsWith("**")) return React.createElement("p", { key: i, className: "result-bold" }, line.slice(2, -2));
        if (line.startsWith("---")) return React.createElement("hr", { key: i, className: "result-hr" });
        return React.createElement("p", { key: i, className: "result-p" }, line);
      });
    };

    function CoffeeWithFede() {
      const [loading, setLoading] = useState(false);
      const [loadingMode, setLoadingMode] = useState(null);
      const [result, setResult] = useState(null);
      const [copiedIdx, setCopiedIdx] = useState(null);
      const [error, setError] = useState(null);

      const today = new Date();
      const isFriday = today.getDay() === 5;
      const dayName = today.toLocaleDateString("en-US", { weekday: "long" });
      const dateStr = today.toLocaleDateString("en-US", { month: "long", day: "numeric", year: "numeric" });

      const parseDailyOptions = (content) => {
        const blocks = content.split(/‚îÅ‚îÅ‚îÅ OPTION \d+ ‚îÅ‚îÅ‚îÅ/).slice(1);
        return blocks.map((block) => {
          const news = (block.match(/üì∞ NEWS:\n([\s\S]*?)(?=\n‚úçÔ∏è)/) || [])[1]?.trim() || "";
          const post = (block.match(/‚úçÔ∏è POST DRAFT:\n([\s\S]*?)(?=\nüí°)/) || [])[1]?.trim() || "";
          const angle = (block.match(/üí° ANGLE:\n([\s\S]*?)(?=\nüîó|$)/) || [])[1]?.trim() || "";
          const source = (block.match(/üîó SOURCE:\n([\s\S]*?)$/) || [])[1]?.trim() || "";
          return { news, post, angle, source };
        });
      };

      const copyPost = (idx) => {
        const blocks = result?.content?.split(/‚îÅ‚îÅ‚îÅ OPTION \d+ ‚îÅ‚îÅ‚îÅ/) || [];
        const block = blocks[idx + 1] || "";
        const match = block.match(/‚úçÔ∏è POST DRAFT:\n([\s\S]*?)(?=\nüí°|$)/);
        const text = (match ? match[1] : "").trim();
        navigator.clipboard.writeText(text);
        setCopiedIdx(idx);
        setTimeout(() => setCopiedIdx(null), 2500);
      };

      const callAPI = async (type) => {
        setLoading(true);
        setLoadingMode(type);
        setResult(null);
        setError(null);

        const dailyPrompt = `You are finding news stories for Federico Gai's LinkedIn. Federico is Italian, lives in Germany, and his unique positioning is being the bridge between the Italian and German media/marketing markets.

FRESHNESS RULE ‚Äî NON NEGOTIABLE:
Only use stories published in the last 10 days. Before selecting any story, check its publication date. If you cannot verify the date or if the story is older than 10 days, discard it and find another one. Today is ${dateStr}. Do not use stories older than 10 days before this date under any circumstances.

STEP 1 ‚Äî SEARCH WITH THIS PRIORITY ORDER:

PRIORITY 1 (most important): Stories that are relevant to BOTH Italy and Germany ‚Äî either a trend/news that impacts both markets, a comparison between the two, a company moving between them, or a topic where Federico's dual perspective adds genuine value. Search: Engage.it, ninjamarketing.it, Primaonline.it, Horizont.net, W&V, AdAge, The Drum.

PRIORITY 2 (fallback): Strong industry stories (AI in advertising, agency news, programmatic, media investment) from any market ‚Äî international, Italian, or German.

STEP 2 ‚Äî SELECT 3 STORIES using this logic:
- If you find 3 or more good Italy/Germany bridge stories ‚Üí use ALL 3 slots for those
- If you find 2 good bridge stories ‚Üí use 2 slots for those + 1 slot for the best industry story
- If you find 1 good bridge story ‚Üí use 1 slot for that + 2 slots for the best industry stories
- If you find 0 bridge stories ‚Üí use 3 slots for the best industry stories

STEP 3 ‚Äî WRITE THE POSTS. One post per story. Each post has a DIFFERENT angle:
- Angle 1: industry insight ‚Äî what does this mean for the market
- Angle 2: Federico's personal perspective or experience on this topic
- Angle 3: a sharp observation or question that invites discussion

CRITICAL TONE RULES FOR ALL 3 POSTS:
- Same natural, conversational voice across all options
- If a story has an Italy/Germany angle, let it emerge naturally ‚Äî do NOT force cultural clich√©s
- Irony is welcome but subtle
- Never starts with "I". Ends with a question or sharp take. Max 3 hashtags. 150-220 words.

Format your response EXACTLY like this (repeat the block 3 times):

‚îÅ‚îÅ‚îÅ OPTION 1 ‚îÅ‚îÅ‚îÅ

üì∞ NEWS:
[1-2 sentence summary: what happened, source]

‚úçÔ∏è POST DRAFT:
[Complete LinkedIn post]

üí° ANGLE:
[5-8 words: the angle of this post]

üîó SOURCE:
[Full URL of the original article. Must be a real, working link.]

‚îÅ‚îÅ‚îÅ OPTION 2 ‚îÅ‚îÅ‚îÅ
[same structure]

‚îÅ‚îÅ‚îÅ OPTION 3 ‚îÅ‚îÅ‚îÅ
[same structure]`;

        const weeklyPrompt = `It's Friday ‚Äî time for the weekly "Coffee with Fede" media intelligence brief.

Search for the 4-6 most important stories from THIS WEEK in media, advertising, AI in marketing, and communication. 
- Check Italian sources: Engage.it, ninjamarketing.it, Primaonline.it
- Check international: AdAge, AdExchanger, The Drum, Marketing Dive, Campaign  
- Check German: Horizont.net, W&V
- Key topics: AI in advertising, agency news, platform shifts, Italian or German specific market news

Create TWO briefing documents separated clearly:

---
DOCUMENT 1: INTEL BRIEF ‚Äî WEEK OF ${dateStr.toUpperCase()}

EXECUTIVE SUMMARY
[3-4 sentence overview of the week's key themes]

TOP STORY
[Headline ‚Äî Source]
Summary: [2-3 sentences]
WHY IT MATTERS: [1 sharp paragraph on the strategic implication]

KEY STORIES
[3-4 more stories in same format]

BY THE NUMBERS
[4-6 key stats/figures from the week's stories as a simple list]

WORTH WATCHING
[1-2 emerging trends to monitor]

THIS WEEK'S INSIGHT
[A sharp, opinionated closing take ‚Äî Federico's voice]

---
DOCUMENT 2: EXECUTIVE BRIEF FOR CMOS ‚Äî WEEK OF ${dateStr.toUpperCase()}

[A punchy 250-300 word version for busy CMOs. Lead with the biggest implication, cover 3 stories briefly, close with 2-3 recommended actions. Sharp and direct.]
---`;

        const controller = new AbortController();
        const timeout = setTimeout(() => controller.abort(), 60000);
        try {
          const response = await fetch("https://api.anthropic.com/v1/messages", {
            method: "POST",
            signal: controller.signal,
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              model: "claude-sonnet-4-20250514",
              max_tokens: 4000,
              system: FEDERICO_SYSTEM_PROMPT,
              tools: [{ type: "web_search_20250305", name: "web_search" }],
              messages: [{ role: "user", content: type === "daily" ? dailyPrompt : weeklyPrompt }],
            }),
          });
          const data = await response.json();
          if (data.error) { setError("API error: " + (data.error.message || "Unknown error")); return; }
          const textContent = data.content.filter((b) => b.type === "text").map((b) => b.text).join("\n");
          setResult({ type, content: textContent });
        } catch (err) {
          if (err.name === "AbortError") { setError("Took too long ‚Äî please try again."); return; }
          setError("Something went wrong. Check your connection and try again.");
        } finally {
          clearTimeout(timeout);
          setLoading(false);
          setLoadingMode(null);
        }
      };

      const OPTION_ACCENTS = ["#2C5F2E", "#B05A20", "#1A3A6B"];
      const OPTION_LABELS = ["Industry insight", "Personal angle", "Sharp take"];

      return (
        <>
          <style>{`
            @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&display=swap');
            *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
            body { background: #F4EFE8; min-height: 100vh; }
            .app { min-height: 100vh; background: #F4EFE8; font-family: 'DM Sans', sans-serif; position: relative; }
            .grain { position: fixed; inset: 0; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.035'/%3E%3C/svg%3E"); pointer-events: none; z-index: 0; }
            .content { position: relative; z-index: 1; }
            .back-link { position: absolute; top: 20px; left: 24px; font-size: 13px; color: #8B6A40; text-decoration: none; letter-spacing: 0.5px; display: flex; align-items: center; gap: 6px; font-family: 'DM Sans', sans-serif; transition: color 0.2s; }
            .back-link:hover { color: #B05A20; }
            .header { padding: 52px 24px 36px; text-align: center; }
            .flags { font-size: 22px; letter-spacing: 6px; margin-bottom: 16px; display: block; }
            .brand-line { font-size: 11px; font-weight: 400; letter-spacing: 4px; text-transform: uppercase; color: #A08060; margin-bottom: 10px; }
            .main-title { font-family: 'Playfair Display', serif; font-size: clamp(38px, 6vw, 62px); font-weight: 700; color: #251508; line-height: 1.05; letter-spacing: -1px; }
            .main-title em { font-style: italic; color: #B05A20; }
            .dateline { margin-top: 14px; font-size: 12px; font-weight: 300; color: #907550; letter-spacing: 2.5px; text-transform: uppercase; }
            .friday-badge { display: inline-flex; align-items: center; gap: 6px; background: #B05A20; color: #FDF8F2; font-size: 11px; font-weight: 500; letter-spacing: 1.5px; text-transform: uppercase; padding: 5px 14px; border-radius: 2px; margin-top: 14px; animation: fridayPop 0.4s ease; }
            @keyframes fridayPop { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
            .friday-dot { width: 6px; height: 6px; background: #FFD9B0; border-radius: 50%; animation: blink 1.4s ease-in-out infinite; }
            @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.2; } }
            .ornament { display: flex; align-items: center; justify-content: center; gap: 16px; margin: 0 auto; padding: 0 24px; max-width: 600px; }
            .ornament-line { flex: 1; height: 1px; background: linear-gradient(90deg, transparent, #C4A070); }
            .ornament-line.right { background: linear-gradient(90deg, #C4A070, transparent); }
            .ornament-symbol { color: #C4A070; font-size: 14px; letter-spacing: 4px; }
            .main { max-width: 760px; margin: 0 auto; padding: 44px 24px 80px; }
            .tagline { text-align: center; font-size: 15px; font-weight: 300; font-style: italic; color: #6B5040; margin-bottom: 36px; line-height: 1.5; }
            .btn-row { display: flex; gap: 14px; justify-content: center; flex-wrap: wrap; margin-bottom: 48px; }
            .btn { display: flex; align-items: center; gap: 9px; padding: 15px 30px; border-radius: 2px; font-size: 14px; font-weight: 500; cursor: pointer; border: none; font-family: 'DM Sans', sans-serif; letter-spacing: 0.5px; transition: all 0.18s ease; white-space: nowrap; }
            .btn:disabled { opacity: 0.6; cursor: not-allowed; }
            .btn-primary { background: #251508; color: #F4EFE8; box-shadow: 0 2px 16px rgba(37,21,8,0.22); }
            .btn-primary:not(:disabled):hover { background: #3D2010; transform: translateY(-1px); box-shadow: 0 4px 20px rgba(37,21,8,0.28); }
            .btn-secondary { background: transparent; color: #251508; border: 1.5px solid #C4A070; }
            .btn-secondary:not(:disabled):hover { background: #EDE5D8; transform: translateY(-1px); }
            .btn-friday { background: #B05A20; color: #FDF8F2; box-shadow: 0 2px 20px rgba(176,90,32,0.35); border: none; }
            .btn-friday:not(:disabled):hover { background: #C4661E; transform: translateY(-1px); }
            .btn-icon { font-size: 16px; }
            .loading-state { text-align: center; padding: 48px 0; animation: fadeIn 0.3s ease; }
            .coffee-loader { font-size: 36px; animation: steam 1.8s ease-in-out infinite; display: block; margin-bottom: 20px; }
            @keyframes steam { 0%, 100% { transform: translateY(0) rotate(-3deg); } 50% { transform: translateY(-6px) rotate(3deg); } }
            .loading-text { font-size: 14px; font-style: italic; color: #907050; font-weight: 300; }
            .loading-sources { font-size: 12px; color: #B0956A; margin-top: 8px; letter-spacing: 0.3px; }
            @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
            .options-wrap { animation: slideUp 0.4s ease; }
            @keyframes slideUp { from { opacity: 0; transform: translateY(16px); } to { opacity: 1; transform: translateY(0); } }
            .options-intro { text-align: center; font-size: 13px; font-style: italic; color: #907050; margin-bottom: 24px; letter-spacing: 0.3px; }
            .option-card { background: #FFFCF8; border: 1px solid #DDD0BC; border-radius: 3px; overflow: hidden; box-shadow: 0 3px 18px rgba(37,21,8,0.08); margin-bottom: 20px; transition: box-shadow 0.2s ease; }
            .option-card:hover { box-shadow: 0 6px 28px rgba(37,21,8,0.13); }
            .option-header { padding: 14px 20px; border-bottom: 1px solid #E8DCC8; border-left: 4px solid #C4A070; background: #F8F2E8; display: flex; justify-content: space-between; align-items: center; gap: 12px; flex-wrap: wrap; }
            .option-meta { display: flex; align-items: center; gap: 10px; }
            .option-num { font-size: 11px; font-weight: 600; letter-spacing: 2px; text-transform: uppercase; }
            .option-angle { font-size: 13px; color: #5A4030; font-style: italic; font-weight: 300; }
            .option-label-row { display: flex; align-items: center; gap: 10px; }
            .option-style { font-size: 11px; font-weight: 500; letter-spacing: 1.5px; text-transform: uppercase; color: #8B6A40; background: #EDE5D8; padding: 3px 10px; border-radius: 2px; }
            .copy-btn { background: #251508; color: #F4EFE8; border: none; padding: 7px 16px; border-radius: 2px; font-size: 12px; font-weight: 500; cursor: pointer; font-family: 'DM Sans', sans-serif; letter-spacing: 0.8px; transition: all 0.15s ease; white-space: nowrap; }
            .copy-btn:hover { background: #B05A20; }
            .option-body { padding: 20px 22px 24px; }
            .news-pill { background: #F0EAE0; border-radius: 2px; padding: 10px 14px; margin-bottom: 16px; display: flex; gap: 10px; align-items: flex-start; }
            .news-pill-label { font-size: 11px; font-weight: 600; color: #8B6A40; letter-spacing: 1px; text-transform: uppercase; white-space: nowrap; padding-top: 1px; }
            .news-pill-text { font-size: 13px; color: #5A4030; line-height: 1.55; font-weight: 300; }
            .post-text { font-size: 15px; color: #251508; line-height: 1.82; white-space: pre-wrap; font-weight: 300; }
            .source-row { display: flex; align-items: center; gap: 10px; margin-top: 16px; padding-top: 14px; border-top: 1px solid #EDE5D8; }
            .source-label { font-size: 11px; font-weight: 600; color: #8B6A40; letter-spacing: 1px; text-transform: uppercase; white-space: nowrap; }
            .source-link { font-size: 13px; color: #B05A20; text-decoration: none; word-break: break-all; line-height: 1.4; font-weight: 300; }
            .source-link:hover { text-decoration: underline; color: #8B3A10; }
            .result-card { background: #FFFCF8; border: 1px solid #DDD0BC; border-radius: 3px; overflow: hidden; box-shadow: 0 6px 32px rgba(37,21,8,0.1); animation: slideUp 0.4s ease; }
            .result-header { display: flex; justify-content: space-between; align-items: center; padding: 16px 24px; border-bottom: 1px solid #E8DCC8; background: #F8F2E8; }
            .result-tag { font-size: 11px; font-weight: 500; letter-spacing: 2px; text-transform: uppercase; color: #8B6A40; }
            .result-body { padding: 28px 28px 32px; }
            .result-h1 { font-family: 'Playfair Display', serif; font-size: 20px; font-weight: 700; color: #251508; margin: 20px 0 8px; line-height: 1.3; }
            .result-h2 { font-family: 'Playfair Display', serif; font-size: 16px; font-weight: 600; color: #251508; margin: 22px 0 6px; padding-bottom: 6px; border-bottom: 1px solid #E8DCC8; }
            .result-bold { font-weight: 600; color: #251508; font-size: 15px; margin: 4px 0; line-height: 1.6; }
            .result-p { font-size: 15px; color: #3D2C1A; line-height: 1.78; margin: 3px 0; }
            .result-hr { border: none; border-top: 1px solid #E8DCC8; margin: 24px 0; }
            .error-box { background: #FDF0E8; border: 1px solid #E8C0A0; border-radius: 3px; padding: 20px 24px; color: #7A3010; font-size: 14px; text-align: center; animation: fadeIn 0.3s ease; }
            .footer { border-top: 1px solid #DDD0BC; padding: 20px 24px; text-align: center; color: #B0956A; font-size: 11px; letter-spacing: 1.5px; text-transform: uppercase; font-weight: 300; }
            @media (max-width: 480px) { .btn { padding: 13px 20px; font-size: 13px; } .option-header { flex-direction: column; align-items: flex-start; gap: 8px; } .option-body { padding: 16px 16px 20px; } }
          `}</style>

          <div className="app">
            <div className="grain" />
            <div className="content">
              <a className="back-link" href="https://federicogai.github.io">‚Üê federicogai.github.io</a>
              <header className="header">
                <span className="flags">üáÆüáπ üá©üá™</span>
                <p className="brand-line">Weekly Media Intelligence</p>
                <h1 className="main-title">Coffee with <em>Fede</em></h1>
                <p className="dateline">{dayName} ¬∑ {dateStr}</p>
                {isFriday && (
                  <div className="friday-badge">
                    <span className="friday-dot" />
                    Friday Edition
                  </div>
                )}
              </header>
              <div className="ornament">
                <div className="ornament-line" />
                <span className="ornament-symbol">‚ú¶ ‚ú¶ ‚ú¶</span>
                <div className="ornament-line right" />
              </div>
              <main className="main">
                <p className="tagline">
                  {isFriday
                    ? "It's Friday ‚Äî your weekly brief and 3 post options are one click away."
                    : "Italy √ó Germany news first. 3 post options daily, weekly brief every Friday."}
                </p>
                <div className="btn-row">
                  <button className="btn btn-primary" onClick={() => callAPI("daily")} disabled={loading}>
                    <span className="btn-icon">‚úçÔ∏è</span>
                    Today's 3 Post Options
                  </button>
                  <button
                    className={`btn ${isFriday ? "btn-friday" : "btn-secondary"}`}
                    onClick={() => callAPI("weekly")}
                    disabled={loading}
                  >
                    <span className="btn-icon">üì∞</span>
                    {isFriday ? "Generate Friday Brief" : "Weekly Brief"}
                  </button>
                </div>
                {loading && (
                  <div className="loading-state">
                    <span className="coffee-loader">‚òï</span>
                    <p className="loading-text">
                      {loadingMode === "daily"
                        ? "Scanning the news, drafting 3 options in your style..."
                        : "Reading Italian & international news, building your brief..."}
                    </p>
                    <p className="loading-sources">
                      {loadingMode === "daily"
                        ? "Engage.it ¬∑ AdExchanger ¬∑ The Drum ¬∑ Horizont.net ¬∑ ..."
                        : "Engage.it ¬∑ Primaonline ¬∑ ninjamarketing.it ¬∑ AdAge ¬∑ Campaign ¬∑ W&V ¬∑ ..."}
                    </p>
                  </div>
                )}
                {error && !loading && <div className="error-box">‚ö†Ô∏è {error}</div>}
                {result && !loading && result.type === "daily" && (() => {
                  const options = parseDailyOptions(result.content);
                  return (
                    <div className="options-wrap">
                      <p className="options-intro">3 stories, 3 angles ‚Äî pick the one that feels right today</p>
                      {options.map((opt, i) => (
                        <div className="option-card" key={i}>
                          <div className="option-header" style={{ borderLeftColor: OPTION_ACCENTS[i] }}>
                            <div className="option-meta">
                              <span className="option-num" style={{ color: OPTION_ACCENTS[i] }}>Option {i + 1}</span>
                              <span className="option-angle">{opt.angle}</span>
                            </div>
                            <div className="option-label-row">
                              <span className="option-style">{OPTION_LABELS[i]}</span>
                              <button className="copy-btn" onClick={() => copyPost(i)}>
                                {copiedIdx === i ? "‚úì Copied!" : "Copy Post"}
                              </button>
                            </div>
                          </div>
                          <div className="option-body">
                            {opt.news && (
                              <div className="news-pill">
                                <span className="news-pill-label">üì∞ News</span>
                                <span className="news-pill-text">{opt.news}</span>
                              </div>
                            )}
                            <div className="post-text">{opt.post}</div>
                            {opt.source && (
                              <div className="source-row">
                                <span className="source-label">üîó Source</span>
                                <a className="source-link" href={opt.source} target="_blank" rel="noopener noreferrer">{opt.source}</a>
                              </div>
                            )}
                          </div>
                        </div>
                      ))}
                    </div>
                  );
                })()}
                {result && !loading && result.type === "weekly" && (
                  <div className="result-card">
                    <div className="result-header">
                      <span className="result-tag">üì∞ Weekly Intelligence Brief</span>
                    </div>
                    <div className="result-body">{formatContent(result.content)}</div>
                  </div>
                )}
              </main>
              <footer className="footer">
                Federico Gai ¬∑ Managing Partner ¬∑ Media ¬∑ Italy √ó Germany
              </footer>
            </div>
          </div>
        </>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(React.createElement(CoffeeWithFede));
  </script>
</body>
</html>
